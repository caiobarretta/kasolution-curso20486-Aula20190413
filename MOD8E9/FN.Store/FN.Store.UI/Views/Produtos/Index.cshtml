<h2>Listagem de Produtos</h2>

<div>
	<a class="btn btn-secondary" href="~/Produtos/AddEdit">Adicionar</a>
</div>

<div class="mt-4">
	<table class="table">
		<thead>
			<tr>
				<th>Nome</th>
				<th>Preço</th>
				<th>Categoria</th>
				<th>Cadastro</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			@foreach (Produto produto in Model)
			{
				<tr id="item-@produto.Id">
					<td>@produto.Nome</td>
					<td>@produto.Preco</td>
					<td>@produto?.Categoria?.Nome</td>
					<td>@produto.DataCadastro</td>
					<td>
						<a class="btn btn-sm btn-success" href="~/Produtos/AddEdit/@produto.Id">Editar</a>
						<button class="btn btn-sm btn-danger" onclick="excluir(@produto.Id, '@produto.Nome')">Excluir</button>
					</td>
				</tr>
			}
		</tbody>
	</table>
</div>

<!-- Modal -->
<!-- data-id="0" não estamos usando -->
<div data-id="0" class="modal fade" id="delProdModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLabel">Excluir</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				Quer excluir o produto: <strong><span id="nomeProd">xpto</span></strong>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
				<button type="button" class="btn btn-danger" onclick="confirmar()">Confirmar</button>
			</div>
		</div>
	</div>
</div>

@section scripts{

	<script type="text/javascript">
		var _id = 0;
		let _url = "@Url.Action("Delete", "Produtos")";
		let msg = '@TempData["msg"]';
	</script>

	<script src="~/js/produto-index.js"></script>
}

